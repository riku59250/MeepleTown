<h1>Liste des parties </h1>

<nav class="navbar navbar-light bg-light float-right col-12">
    <form class="form-inline col-12">
        <input class="form-control col-12" type="search" name="searchString" [(ngModel)]="searchString" autocomplete="off" placeholder="Entrez un lieu pour filter les résultats.">
    </form>
</nav>

    <table class="table">
        <thead class="thead-light">
        <tr>
            <th scope="col">Titre</th>
            <th scope="col">Lieu</th>
            <th scope="col">Date</th>
            <th scope="col">Nombre de joueurs</th>
            <th scope="col">Auteur</th>
            <th *ngIf="isUserConnected"> Actions possibles</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let session of listSessions | searchFilter : 'place' : searchString" [className]="session.isPrivate ? 'table-secondary' : '' " >
            <th scope="row"> <a class="nav-link" [routerLink]="['/sessionPage', session.id]" >{{session.title}} </a></th>
            <td>{{session.place}}</td>
            <td> le {{session.startDate | date: 'EEEE dd MMMM yyy':'fr'}} de {{session.startDate | date: 'HH:mm'}} à {{session.endDate | date: 'HH:mm'}}</td>
            <td>{{session.playersList?.length}} / {{session.nbMaxPlayers}}</td>
            <td>{{session.author?.pseudo}}</td>
            <td *ngIf="isUserConnected">
                <p class="alert alert-secondary" *ngIf="session.isPrivate">Cette partie est privée.</p>
                <button class="btn btn-secondary" *ngIf="!session.isPrivate && !isAuthor(session.author) && !isComplete(session) && !isPlayer(session)" (click)="addPlayer(session)">Rejoindre</button> 
                <button class="btn btn-danger" *ngIf="isAuthor(session.author)" (click)="openDialogSuppress(session.id)">Supprimer</button>
                <p class="alert alert-success" *ngIf="!isAuthor(session.author) && isPlayer(session)">Vous participez à cette partie. <button class="btn btn-danger" (click)="deletePlayer(session)"> Quitter ? </button></p>
            </td>
        </tr>
        </tbody>
    </table>
